{
    "swagger": "2.0",
    "info": {
        "description": "Time planning and tracking API",
        "title": "Klokku API",
        "contact": {},
        "version": "0.9"
    },
    "host": "localhost:8181",
    "basePath": "/",
    "paths": {
        "/api/budgetplan": {
            "get": {
                "description": "Get a list of all budget plans for the current user",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "BudgetPlan"
                ],
                "summary": "List all budget plans",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/budget_plan.BudgetPlanDTO"
                            }
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "post": {
                "description": "Create a new budget plan with the provided details",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "BudgetPlan"
                ],
                "summary": "Create a new budget plan",
                "parameters": [
                    {
                        "description": "Budget Plan",
                        "name": "plan",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/budget_plan.BudgetPlanDTO"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/budget_plan.BudgetPlanDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/budgetplan/{planId}": {
            "get": {
                "description": "Retrieve a specific budget plan with all its items",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "BudgetPlan"
                ],
                "summary": "Get a budget plan by ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/budget_plan.BudgetPlanDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Plan Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "put": {
                "description": "Update a budget plan by ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "BudgetPlan"
                ],
                "summary": "Update an existing budget plan",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Budget Plan",
                        "name": "plan",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/budget_plan.BudgetPlanDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/budget_plan.BudgetPlanDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Plan Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "delete": {
                "description": "Delete a budget plan by ID",
                "tags": [
                    "BudgetPlan"
                ],
                "summary": "Delete a budget plan",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Plan Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/budgetplan/{planId}/item": {
            "post": {
                "description": "Register a new budget item within a specific budget plan",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "BudgetItem"
                ],
                "summary": "Add a new budget item to a plan",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Budget Item",
                        "name": "item",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/budget_plan.ItemDTO"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/budget_plan.ItemDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/budgetplan/{planId}/item/{itemId}": {
            "put": {
                "description": "Update an existing budget item within a plan",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "BudgetItem"
                ],
                "summary": "Update a budget item",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Budget Item ID",
                        "name": "itemId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Budget Item",
                        "name": "item",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/budget_plan.ItemDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/budget_plan.ItemDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "delete": {
                "description": "Remove a budget item from a plan",
                "tags": [
                    "BudgetItem"
                ],
                "summary": "Delete a budget item",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Budget Item ID",
                        "name": "itemId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Item Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/budgetplan/{planId}/item/{itemId}/position": {
            "put": {
                "description": "Move a budget item to a specific position in the list",
                "consumes": [
                    "application/json"
                ],
                "tags": [
                    "BudgetItem"
                ],
                "summary": "Set position of a budget item",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Plan ID",
                        "name": "planId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Budget Item ID",
                        "name": "itemId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Position details",
                        "name": "position",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "integer"
                                },
                                "precedingId": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Item Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/calendar/event": {
            "get": {
                "description": "Retrieve calendar events within a date range",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Calendar"
                ],
                "summary": "Get calendar events",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Start date in RFC3339 format",
                        "name": "from",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "End date in RFC3339 format",
                        "name": "to",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/calendar.EventDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid date format",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "post": {
                "description": "Add a new event to the calendar",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Calendar"
                ],
                "summary": "Create a calendar event",
                "parameters": [
                    {
                        "description": "Calendar Event",
                        "name": "event",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/calendar.EventDTO"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Array of created events (may include recurring instances)",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/calendar.EventDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/calendar/event/recent": {
            "get": {
                "description": "Retrieve the most recent calendar events. Specify the number using the 'last' query parameter (e.g., last=5)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Calendar"
                ],
                "summary": "Get recent calendar events",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 5,
                        "description": "Number of recent events to retrieve",
                        "name": "last",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/calendar.EventDTO"
                            }
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/calendar/event/{eventUid}": {
            "put": {
                "description": "Modify an existing calendar event",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Calendar"
                ],
                "summary": "Update a calendar event",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Event UID",
                        "name": "eventUid",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Updated Calendar Event",
                        "name": "event",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/calendar.EventDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Array of modified events",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/calendar.EventDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "delete": {
                "description": "Remove a calendar event by UID",
                "tags": [
                    "Calendar"
                ],
                "summary": "Delete a calendar event",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Event UID",
                        "name": "eventUid",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/event": {
            "post": {
                "description": "Start a new event with the given budget item id",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "CurrentEvent"
                ],
                "summary": "Start a new event",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget item id",
                        "name": "budgetItemId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/current_event.CurrentEventDTO"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/event/current": {
            "get": {
                "description": "Retrieve the currently active event",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "CurrentEvent"
                ],
                "summary": "Get the current running event",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/current_event.CurrentEventDTO"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "No current event",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/event/current/start": {
            "patch": {
                "description": "Update the start time of the currently running event",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "CurrentEvent"
                ],
                "summary": "Modify current event start time",
                "parameters": [
                    {
                        "description": "Start time in RFC3339 format",
                        "name": "startTime",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "properties": {
                                "startTime": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/current_event.CurrentEventDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "No current event",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/auth": {
            "get": {
                "description": "Check if the current user has authenticated with ClickUp",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "Check ClickUp authentication status",
                "responses": {
                    "200": {
                        "description": "true",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Not authenticated"
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "delete": {
                "description": "Disconnect and disable the ClickUp integration",
                "tags": [
                    "ClickUp"
                ],
                "summary": "Disable ClickUp integration",
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/auth/callback": {
            "get": {
                "description": "Handle the OAuth callback from ClickUp",
                "tags": [
                    "ClickUp"
                ],
                "summary": "ClickUp OAuth callback",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Authorization code",
                        "name": "code",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "State parameter",
                        "name": "state",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirect to finalUrl with success=true/false"
                    }
                }
            }
        },
        "/api/integrations/clickup/auth/login": {
            "get": {
                "description": "Start the OAuth flow to connect ClickUp account",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "Initiate ClickUp OAuth login",
                "parameters": [
                    {
                        "type": "string",
                        "description": "URL to redirect to after authentication",
                        "name": "finalUrl",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OAuth redirect URL",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "redirectUrl": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/configuration": {
            "get": {
                "description": "Retrieve the current ClickUp integration configuration",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "Get ClickUp configuration",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/clickup.ConfigurationDTO"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "put": {
                "description": "Save ClickUp integration configuration and budget mappings",
                "consumes": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "Store ClickUp configuration",
                "parameters": [
                    {
                        "description": "ClickUp Configuration",
                        "name": "configuration",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/clickup.ConfigurationDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/folder": {
            "get": {
                "description": "Get all folders in a ClickUp space",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "List ClickUp folders",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Space ID",
                        "name": "spaceId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/clickup.FolderDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/space": {
            "get": {
                "description": "Get all spaces in a ClickUp workspace",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "List ClickUp spaces",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Workspace ID",
                        "name": "workspaceId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/clickup.SpaceDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/tag": {
            "get": {
                "description": "Get all tags in a ClickUp space",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "List ClickUp tags",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Space ID",
                        "name": "spaceId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/clickup.TagDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/tasks": {
            "get": {
                "description": "Retrieve ClickUp tasks for a specific budget item",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "Get ClickUp tasks",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Budget Item ID",
                        "name": "budgetItemId",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/clickup.TaskDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/integrations/clickup/workspace": {
            "get": {
                "description": "Get all ClickUp workspaces the user has access to",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ClickUp"
                ],
                "summary": "List ClickUp workspaces",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/clickup.WorkspaceDTO"
                            }
                        }
                    },
                    "403": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/stats/weekly": {
            "get": {
                "description": "Retrieve statistics for a specific week including time spent per plan item",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Stats"
                ],
                "summary": "Get weekly statistics",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Date in RFC3339 format (can be any day of the week)",
                        "name": "date",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/stats.StatsSummaryDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid date format",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/user": {
            "get": {
                "description": "Retrieve a list of all registered users",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Get all users",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/user.UserDTO"
                            }
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            },
            "post": {
                "description": "Register a new user in the system",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Create a new user",
                "parameters": [
                    {
                        "description": "User",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.UserDTO"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/user.UserDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/api/user/current": {
            "get": {
                "description": "Retrieve the currently authenticated user's information",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Get current user",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/user.UserDTO"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "User Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "put": {
                "description": "Update the currently authenticated user's information",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Update current user",
                "parameters": [
                    {
                        "description": "User",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.UserDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/user.UserDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/user/current/photo": {
            "get": {
                "description": "Retrieve a user's profile photo. If userUid is provided, gets that user's photo, otherwise gets current user's photo",
                "produces": [
                    "image/jpeg"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Get user photo",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            },
            "put": {
                "description": "Upload a profile photo for the current user (max 3MB)",
                "consumes": [
                    "multipart/form-data"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Upload user photo",
                "parameters": [
                    {
                        "type": "file",
                        "description": "User photo",
                        "name": "photo",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "400": {
                        "description": "Image too large or invalid",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "delete": {
                "description": "Remove the current user's profile photo",
                "tags": [
                    "User"
                ],
                "summary": "Delete user photo",
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/user/name-availability": {
            "get": {
                "description": "Check if a username is available for registration",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Check username availability",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Username to check",
                        "name": "username",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "available": {
                                    "type": "boolean"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Username is required",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/user/{userUid}": {
            "delete": {
                "description": "Delete a user by UID",
                "tags": [
                    "User"
                ],
                "summary": "Delete a user",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User UID",
                        "name": "userUid",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/api/user/{userUid}/photo": {
            "get": {
                "description": "Retrieve a user's profile photo. If userUid is provided, gets that user's photo, otherwise gets current user's photo",
                "produces": [
                    "image/jpeg"
                ],
                "tags": [
                    "User"
                ],
                "summary": "Get user photo",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User UID (optional)",
                        "name": "userUid",
                        "in": "path"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/api/weeklyplan": {
            "get": {
                "description": "Retrieve all items for a specific week",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "WeeklyPlan"
                ],
                "summary": "Get weekly plan items",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Date in RFC3339 format (can be any day of the week)",
                        "name": "date",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/weekly_plan.WeeklyPlanItemDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid date format",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            },
            "delete": {
                "description": "Reset all weekly plan items to budget plan values for a specific week",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "WeeklyPlan"
                ],
                "summary": "Reset entire week",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Date in RFC3339 format (can be any day of the week)",
                        "name": "date",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/weekly_plan.WeeklyPlanItemDTO"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid date format",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/weeklyplan/item": {
            "put": {
                "description": "Update the duration and notes for a weekly plan item",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "WeeklyPlan"
                ],
                "summary": "Update a weekly plan item",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Date in RFC3339 format (can be any day of the week)",
                        "name": "date",
                        "in": "query",
                        "required": true
                    },
                    {
                        "description": "Item update details",
                        "name": "item",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object",
                            "properties": {
                                "budgetItemId": {
                                    "type": "integer"
                                },
                                "id": {
                                    "type": "integer"
                                },
                                "notes": {
                                    "type": "string"
                                },
                                "weeklyDuration": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/weekly_plan.WeeklyPlanItemDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "404": {
                        "description": "Item Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        },
        "/api/weeklyplan/item/{itemId}": {
            "delete": {
                "description": "Reset a weekly plan item to its original budget plan values",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "WeeklyPlan"
                ],
                "summary": "Reset a weekly plan item",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "Weekly Plan Item ID",
                        "name": "itemId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/weekly_plan.WeeklyPlanItemDTO"
                        }
                    },
                    "400": {
                        "description": "Invalid itemId",
                        "schema": {
                            "$ref": "#/definitions/rest.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "User not found",
                        "schema": {
                            "type": "string"
                        }
                    }
                },
                "security": [
                    {
                        "XUserId": []
                    }
                ]
            }
        }
    },
    "definitions": {
        "budget_plan.BudgetPlanDTO": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer"
                },
                "isCurrent": {
                    "type": "boolean"
                },
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/budget_plan.ItemDTO"
                    }
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "budget_plan.ItemDTO": {
            "type": "object",
            "properties": {
                "color": {
                    "type": "string"
                },
                "icon": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "weeklyDuration": {
                    "type": "integer"
                },
                "weeklyOccurrences": {
                    "type": "integer"
                }
            }
        },
        "calendar.EventDTO": {
            "type": "object",
            "properties": {
                "budgetItemId": {
                    "type": "integer"
                },
                "end": {
                    "type": "string"
                },
                "start": {
                    "type": "string"
                },
                "summary": {
                    "type": "string"
                },
                "uid": {
                    "type": "string"
                }
            }
        },
        "clickup.BudgetMappingDTO": {
            "type": "object",
            "properties": {
                "budgetItemId": {
                    "type": "integer"
                },
                "clickUpSpaceId": {
                    "type": "integer"
                },
                "clickUpTagName": {
                    "type": "string"
                },
                "position": {
                    "type": "integer"
                }
            }
        },
        "clickup.ConfigurationDTO": {
            "type": "object",
            "properties": {
                "folderId": {
                    "type": "integer"
                },
                "mappings": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/clickup.BudgetMappingDTO"
                    }
                },
                "spaceId": {
                    "type": "integer"
                },
                "workspaceId": {
                    "type": "integer"
                }
            }
        },
        "clickup.FolderDTO": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "clickup.SpaceDTO": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "clickup.TagDTO": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "clickup.TaskDTO": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "timeEstimateSec": {
                    "type": "integer"
                }
            }
        },
        "clickup.WorkspaceDTO": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "current_event.CurrentEventDTO": {
            "type": "object",
            "properties": {
                "planItem": {
                    "$ref": "#/definitions/current_event.PlanItemDTO"
                },
                "startTime": {
                    "type": "string"
                }
            }
        },
        "current_event.PlanItemDTO": {
            "type": "object",
            "properties": {
                "budgetItemId": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "weeklyDuration": {
                    "type": "integer"
                }
            }
        },
        "rest.ErrorResponse": {
            "type": "object",
            "properties": {
                "details": {
                    "type": "string"
                },
                "error": {
                    "type": "string"
                }
            }
        },
        "stats.DailyStatsDTO": {
            "type": "object",
            "properties": {
                "date": {
                    "type": "string"
                },
                "perPlanItem": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/stats.PlanItemStatsDTO"
                    }
                },
                "totalTime": {
                    "type": "integer"
                }
            }
        },
        "stats.PlanItemStatsDTO": {
            "type": "object",
            "properties": {
                "duration": {
                    "type": "integer"
                },
                "remaining": {
                    "type": "integer"
                },
                "weeklyPlanItem": {
                    "$ref": "#/definitions/weekly_plan.WeeklyPlanItemDTO"
                }
            }
        },
        "stats.StatsSummaryDTO": {
            "type": "object",
            "properties": {
                "endDate": {
                    "type": "string"
                },
                "perDay": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/stats.DailyStatsDTO"
                    }
                },
                "perPlanItem": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/stats.PlanItemStatsDTO"
                    }
                },
                "startDate": {
                    "type": "string"
                },
                "totalPlanned": {
                    "type": "integer"
                },
                "totalRemaining": {
                    "type": "integer"
                },
                "totalTime": {
                    "type": "integer"
                }
            }
        },
        "user.EventCalendarType": {
            "type": "string",
            "enum": [
                "klokku",
                "google"
            ],
            "x-enum-varnames": [
                "KlokkuCalendar",
                "GoogleCalendar"
            ]
        },
        "user.GoogleCalendarSettingsDTO": {
            "type": "object",
            "properties": {
                "calendarId": {
                    "type": "string"
                }
            }
        },
        "user.SettingsDTO": {
            "type": "object",
            "properties": {
                "eventCalendarType": {
                    "$ref": "#/definitions/user.EventCalendarType"
                },
                "googleCalendar": {
                    "$ref": "#/definitions/user.GoogleCalendarSettingsDTO"
                },
                "timezone": {
                    "type": "string"
                },
                "weekStartDay": {
                    "type": "string"
                }
            }
        },
        "user.UserDTO": {
            "type": "object",
            "properties": {
                "displayName": {
                    "type": "string"
                },
                "settings": {
                    "$ref": "#/definitions/user.SettingsDTO"
                },
                "uid": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "weekly_plan.WeeklyPlanItemDTO": {
            "type": "object",
            "properties": {
                "budgetItemId": {
                    "type": "integer"
                },
                "color": {
                    "type": "string"
                },
                "icon": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "notes": {
                    "type": "string"
                },
                "position": {
                    "type": "integer"
                },
                "weeklyDuration": {
                    "type": "integer"
                },
                "weeklyOccurrences": {
                    "type": "integer"
                }
            }
        }
    },
    "securityDefinitions": {
        "XUserId": {
            "description": "User ID header required for authentication",
            "type": "apiKey",
            "name": "X-User-Id",
            "in": "header"
        }
    }
}